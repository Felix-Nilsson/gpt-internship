import { writable } from 'svelte/store';
import { browser, defaultWindow } from '../../shared/utilities/utils/index.js';
/**
 * A reactive [EyeDropper API](https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper_API)
 *
 * @param options - an object containing the initial value of the sRGBHex value
 * @returns
 */
export function useEyeDropper(options = {}) {
    let window;
    if (browser)
        window = defaultWindow;
    const { initialValue = '' } = options;
    const isSupported = Boolean(typeof window !== 'undefined' && 'EyeDropper' in window);
    const sRGBHex = writable(initialValue);
    async function open(openOptions) {
        if (!isSupported)
            return;
        const eyeDropper = new window.EyeDropper();
        const res = await eyeDropper.open(openOptions);
        sRGBHex.set(res.sRGBHex);
        return res;
    }
    return {
        isSupported,
        sRGBHex,
        open
    };
}
