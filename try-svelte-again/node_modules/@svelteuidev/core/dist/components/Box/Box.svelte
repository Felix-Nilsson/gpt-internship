<script>import { getSystemStyles } from './context';
import { css as _css, useSvelteUITheme, useSvelteUIThemeContext } from '../../styles';
import { createEventForwarder, useActions } from '../../internal';
import { get_current_component } from 'svelte/internal';
export let use = [], element = undefined, className = '', css = {}, root = undefined, m = undefined, my = undefined, mx = undefined, mt = undefined, mb = undefined, ml = undefined, mr = undefined, p = undefined, py = undefined, px = undefined, pt = undefined, pb = undefined, pl = undefined, pr = undefined;
export { className as class };
/** An action that forwards inner dom node events from parent component */
const forwardEvents = createEventForwarder(get_current_component());
/** workaround for root type errors, this should be replaced by a better type system */
const castRoot = () => root;
const theme = useSvelteUIThemeContext()?.theme || useSvelteUITheme();
const getCSSStyles = typeof css === 'function' ? css : () => css;
let isHTMLElement;
let isComponent;
$: {
    isHTMLElement = root && typeof root === 'string';
    isComponent = root && typeof root === 'function';
}
$: BoxStyles = _css({});
$: systemStyles = getSystemStyles({
    m,
    my,
    mx,
    mt,
    mb,
    ml,
    mr,
    p,
    py,
    px,
    pt,
    pb,
    pl,
    pr
}, theme);
</script>

<!--
@component

Add inline styles to any element or component with sx.

@see https://svelteui.org/core/box
@example
    ```svelte
    <Box css={{backgroundColor: '$blue600'}}>example</Box>
	<Box root='span'>example</Box>
	<Box css={{pt: '$20'}}>padding top of 5rem</Box> // uses the paddingTop shorthand, and theme scale
    ```
-->

{#if isHTMLElement}
	<!-- prettier-ignore -->
	<svelte:element
		bind:this={element}
		this={castRoot()}
		use:forwardEvents
		use:useActions={use}
		class="{className} {BoxStyles({ css: {...getCSSStyles(theme), ...systemStyles} })}"
		{...$$restProps}
	>
		<slot></slot>
	</svelte:element>
{:else if isComponent && typeof root !== 'string'}
	<svelte:component
		this={root}
		bind:this={element}
		use={[forwardEvents, [useActions, use]]}
		class="{className} {BoxStyles({ css: { ...getCSSStyles(theme), ...systemStyles } })}"
		{...$$restProps}
	>
		<slot />
	</svelte:component>
{:else}
	<div
		bind:this={element}
		use:forwardEvents
		use:useActions={use}
		class="{className} {BoxStyles({ css: { ...getCSSStyles(theme), ...systemStyles } })}"
		{...$$restProps}
	>
		<slot />
	</div>
{/if}
