<script>import { getContext } from 'svelte';
import { get_current_component } from 'svelte/internal';
import { createEventForwarder, useActions } from '../../../internal';
import { Box } from '../../Box';
import IconRenderer from '../../IconRenderer/IconRenderer.svelte';
import { ctx } from '../Menu.svelte';
import useStyles, { getContextItemIndex } from './MenuItem.styles';
export let use = [], element = undefined, className = '', override = {}, root = 'button', color = undefined, disabled = false, icon = undefined, iconSize = undefined, iconProps = undefined;
export { className as class };
const state = getContext(ctx);
const forwardEvents = createEventForwarder(get_current_component());
const castKeyboardEvent = (event) => event;
$: itemIndex = getContextItemIndex({ elementSelector: '.svelteui-MenuItem-root', parentClassName: 'svelteui-Menu-body' }, element);
$: ({ cx, classes } = useStyles({ color, radius }, { override, name: 'MenuItem' }));
$: ({ hovered, radius, onItemClick, onItemHover, onItemKeyDown } = $state);
</script>

<Box
	{root}
	use={[forwardEvents, [useActions, use]]}
	bind:element
	type="button"
	role="menuitem"
	class={cx(className, classes.root, {
		itemHovered: hovered === itemIndex
	})}
	{disabled}
	on:mouseenter={() => !disabled && onItemHover(itemIndex)}
	on:mouseleave={() => onItemHover(-1)}
	on:keydown={(event) => onItemKeyDown(castKeyboardEvent(event))}
	on:click={onItemClick}
	{...$$restProps}
>
	<div class={classes.itemInner}>
		{#if icon}
			<IconRenderer {icon} className={classes.itemIcon} {iconSize} {iconProps} />
		{/if}
		<div class={classes.itemBody}>
			<div class={classes.itemLabel}>
				<slot />
			</div>
			<slot name="rightSection" />
		</div>
	</div>
</Box>
