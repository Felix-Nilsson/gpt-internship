import { writable } from 'svelte/store';
export function useMousePosition(append = false) {
    const position = writable({ x: 0, y: 0 });
    const setMousePosition = (event) => {
        if (append === false) {
            const target = event.currentTarget;
            const rect = target.getBoundingClientRect();
            const x = Math.max(0, Math.round(event.pageX - rect.left - (window.pageXOffset || window.scrollX)));
            const y = Math.max(0, Math.round(event.pageY - rect.top - (window.pageYOffset || window.scrollY)));
            position.set({ x, y });
        }
        else {
            position.set({ x: event.clientX, y: event.clientY });
        }
    };
    const mouseposition = (node) => {
        const element = !append ? node : document;
        element.addEventListener('mousemove', setMousePosition);
        return {
            destroy: () => {
                element.removeEventListener('mousemove', setMousePosition);
            }
        };
    };
    return [position, mouseposition];
}
