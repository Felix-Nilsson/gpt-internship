/**
 * With the `use-persistenttab` action, prevent current tab from being closed by user.
 *
 * ```svelte
 *  <button use:persistenttab={true}>Keep tab open</button>
 * ```
 * @param enabled - Determines whether the action should execute or not.
 * @see https://svelteui.org/actions/use-persistenttab
 */
export function persistenttab(node, enabled) {
    function handler(e) {
        e.preventDefault();
        e.returnValue = '';
    }
    function setHandler(prevent) {
        (prevent ? window.addEventListener : window.removeEventListener)('beforeunload', handler);
    }
    setHandler(enabled);
    return {
        update: setHandler,
        destroy() {
            setHandler(false);
        }
    };
}
